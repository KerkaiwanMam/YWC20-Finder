import{_ as u,c as a,E as g,F as x,a as d,o,G as p,H as m,t as h,b as _,p as b}from"./C2Qwmur_.js";import{_ as v}from"./A6ttpoyb.js";const y={data(){return{searchText:"",debounceTimer:null}},methods:{onInput(){clearTimeout(this.debounceTimer),this.debounceTimer=setTimeout(()=>{console.log("Searching for:",this.searchText.trim()),this.$emit("search",this.searchText.trim())},300)}},beforeDestroy(){clearTimeout(this.debounceTimer)}},T={class:"p-4"};function k(e,t,i,s,n,l){return o(),a("div",T,[g(d("input",{type:"text","onUpdate:modelValue":t[0]||(t[0]=r=>n.searchText=r),onInput:t[1]||(t[1]=(...r)=>l.onInput&&l.onInput(...r)),placeholder:"ค้นหาด้วยชื่อ, สกุล หรือรหัสสัมภาษณ์",class:"w-full p-2 border rounded-md"},null,544),[[x,n.searchText]])])}const f=u(y,[["render",k]]),w={props:{candidates:{type:Object,required:!0}},methods:{capitalize(e){return e.charAt(0).toUpperCase()+e.slice(1)}}},C={class:"space-y-2 text-black"};function $(e,t,i,s,n,l){return o(),a(m,null,p(["design","content","programming","marketing"],r=>d("div",{key:r,class:"mb-8"},[d("ul",C,[(o(!0),a(m,null,p(i.candidates[r],c=>(o(),a("li",{key:c.interviewRefNo,class:"bg-white p-4 rounded shadow hover:bg-gray-50"},h(c.major)+" - "+h(c.firstName)+" "+h(c.lastName)+" ("+h(c.interviewRefNo)+") ",1))),128))])])),64)}const S=u(w,[["render",$]]),I={components:{CandidatesList:S,SearchInput:f},data(){return{candidates:null,error:null,searchQuery:"",filteredCandidates:[],loading:!1}},mounted(){this.fetchCandidates()},methods:{async fetchCandidates(e=""){this.loading=!0,this.error=null,this.candidates=null;try{const t=e?`http://localhost:8000/api/candidates?q=${encodeURIComponent(e)}`:"http://localhost:8000/api/candidates",i=await fetch(t);if(!i.ok)throw new Error(`HTTP error! status: ${i.status}`);const s=await i.json();console.log(s),s.error?this.error=s.error:(this.candidates={design:s.design||[],programming:s.programming||[],marketing:s.marketing||[],content:s.content||[]},this.filteredCandidates=this.candidates)}catch(t){this.error="ไม่สามารถโหลดข้อมูลได้: "+t.message}finally{this.loading=!1}},handleSearch(e){console.log("Received search query:",e),this.searchQuery=e,this.fetchCandidates(e)}}},N={class:"bg-white min-h-screen"},L={class:"px-32"},R={key:0,class:"text-red-500 p-4"},B={key:1,class:"text-blue-500 p-4"},D={key:2};function E(e,t,i,s,n,l){const r=f,c=b("CandidatesList");return o(),a("div",N,[t[0]||(t[0]=d("div",{class:"bg-background2 text-white font-extrabold p-12 text-center"},[d("img",{src:v,alt:"Logo",class:"w-max h-auto mx-auto mb-4 mt-8 animate-fade-in-up delay-100"}),d("h1",null,"รายชื่อผู้สมัคร")],-1)),d("div",L,[_(r,{onSearch:l.handleSearch},null,8,["onSearch"]),n.error?(o(),a("div",R,h(n.error),1)):n.loading?(o(),a("div",B," กำลังโหลด... ")):(o(),a("div",D,[_(c,{candidates:n.filteredCandidates},null,8,["candidates"])]))])])}const j=u(I,[["render",E]]);export{j as default};

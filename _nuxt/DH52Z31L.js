import{_ as y,a as v}from"./CVhztn1V.js";import{_ as m,c as r,a as s,D as _,E as w,o as n,F as g,G as p,t as u,b as h,n as k}from"./WQ8CErPP.js";const C={props:{modelValue:{type:String,default:""}},methods:{triggerSearch(){this.$emit("search",this.modelValue.trim())},clearSearch(){this.$emit("update:modelValue",""),this.$emit("search","")}}},S={class:"p-4"},$={class:"flex gap-2"},V=["value"];function N(t,e,d,o,l,i){return n(),r("div",S,[s("div",$,[s("input",{type:"text",value:d.modelValue,onInput:e[0]||(e[0]=a=>t.$emit("update:modelValue",a.target.value)),onKeyup:e[1]||(e[1]=w((...a)=>i.triggerSearch&&i.triggerSearch(...a),["enter"])),placeholder:"ค้นหาด้วยชื่อ, สกุล หรือรหัสสัมภาษณ์",class:"w-full text-white/60 p-2 border rounded-md border-white bg-transparent outline-none"},null,40,V),s("button",{onClick:e[2]||(e[2]=(...a)=>i.triggerSearch&&i.triggerSearch(...a)),class:"bg-white text-black px-4 rounded-md hover:bg-gray-200 transition"}," ค้นหา "),d.modelValue?(n(),r("button",{key:0,onClick:e[3]||(e[3]=(...a)=>i.clearSearch&&i.clearSearch(...a)),class:"bg-cancel text-white px-4 rounded-md hover:bg-bordercancel transition"}," ล้าง ")):_("",!0)])])}const f=m(C,[["render",N]]),R={props:{candidates:{type:Object,required:!0}},computed:{filteredMajors(){return["design","content","programming","marketing"].filter(t=>this.candidates[t]&&this.candidates[t].length>0)}},methods:{capitalize(t){return t.charAt(0).toUpperCase()+t.slice(1)}}},j={key:0,class:"text-center text-gray-500 italic py-8"},L={class:"text-2xl font-bold text-white mb-4 border-b pb-2"},z={class:"grid grid-cols-1 sm:grid-cols-2 lg:grid-cols-3 gap-4"},I={class:"flex items-center justify-between mb-2"},Q={class:"text-sm font-medium text-indigo-600 uppercase tracking-wide"},T={class:"text-xs text-gray-400"},B={class:"text-lg font-semibold text-gray-900"};function E(t,e,d,o,l,i){return n(),r("div",null,[i.filteredMajors.length===0?(n(),r("div",j," ไม่มีรายชื่อที่ค้นหา ")):_("",!0),(n(!0),r(g,null,p(i.filteredMajors,a=>(n(),r("div",{key:a,class:"mb-10"},[s("h2",L,u(i.capitalize(a)),1),s("div",z,[(n(!0),r(g,null,p(d.candidates[a],c=>(n(),r("div",{key:c.interviewRefNo,class:"bg-white rounded-2xl shadow-md p-6 hover:shadow-lg transition-shadow duration-300"},[s("div",I,[s("span",Q,u(c.major),1),s("span",T,"Ref: "+u(c.interviewRefNo),1)]),s("div",B,u(c.firstName)+" "+u(c.lastName),1)]))),128))])]))),128))])}const M=m(R,[["render",E]]),U={components:{CandidatesList:M,SearchInput:f},data(){return{candidates:null,error:null,searchQuery:"",filteredCandidates:[],loading:!1}},mounted(){this.fetchCandidates()},methods:{async fetchCandidates(t=""){this.loading=!0,this.error=null,this.candidates=null;try{const e=t?`https://ywc20-backend.onrender.com/api/candidates?q=${encodeURIComponent(t)}`:"https://ywc20-backend.onrender.com/api/candidates",d=await fetch(e);if(!d.ok)throw new Error(`HTTP error! status: ${d.status}`);const o=await d.json();console.log(o),o.error?this.error=o.error:(this.candidates={design:o.design||[],programming:o.programming||[],marketing:o.marketing||[],content:o.content||[]},this.filteredCandidates=this.candidates)}catch(e){e.message.includes("HTTP error! status: 500")?this.error="ไม่พบรายชื่อที่คุณกำลังค้นหา กรุณากรอกรายละเอียดเพิ่มขึ้น":this.error="ไม่สามารถโหลดข้อมูลได้: "+e.message}finally{this.loading=!1}},handleSearch(t){console.log("Received search query:",t),this.searchQuery=t,this.fetchCandidates(t)}}},D={class:"bg-background2 text-white flex items-center justify-center relative min-h-screen"},F={class:"bg-background2 relative z-10 w-full max-w-4xl px-4 py-12"},H={key:0,class:"text-center text-blue-500 text-xl py-20 animate-pulse"},K={key:1},P={class:"mb-6"},A={key:0,class:"text-red-500 text-center p-4"},G={key:1};function O(t,e,d,o,l,i){const a=v,c=f,x=k("CandidatesList");return n(),r("div",D,[h(a,{class:"absolute top-0 left-0 w-full h-full z-0"}),s("div",F,[l.loading?(n(),r("div",H," กำลังโหลดข้อมูลผู้สมัคร... ")):(n(),r("div",K,[e[1]||(e[1]=s("div",{class:"text-white font-extrabold text-center mb-8"},[s("img",{src:y,alt:"Logo",class:"w-max h-auto mx-auto mb-4 mt-8 animate-fade-in-up delay-100"}),s("h1",{class:"text-3xl"},"รายชื่อผู้สมัคร")],-1)),s("div",P,[h(c,{modelValue:l.searchQuery,"onUpdate:modelValue":e[0]||(e[0]=b=>l.searchQuery=b),onSearch:i.handleSearch},null,8,["modelValue","onSearch"])]),l.error?(n(),r("div",A,u(l.error),1)):(n(),r("div",G,[h(x,{candidates:l.filteredCandidates},null,8,["candidates"])]))]))])])}const W=m(U,[["render",O]]);export{W as default};
